<!doctype html>
<html lang="en">

<head>
    <title>lcscodes.github.io</title>
    <script type="text/javascript" src="../../../assets/include_html.js"></script>
    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/dashboard/">
    <link href="../../../assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../../assets/dashboard.css" rel="stylesheet">
</head>

<body onload="myFunction()">

    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">lcscodes.github.io</a>
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
            </li>
        </ul>
    </nav>
    <div w3-include-html="../../../menu.html"></div>
    </div>
    </nav>
    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Codeigniter</h1>
        </div>
        <script>
            function myFunction() {
                var element = document.getElementById("active-record");
                element.classList.add("active");
            }
        </script>
        <!-- content below here -->

        <h5>Active Record CI</h5>
        <pre><code contenteditable spellcheck="false">
  private $_table = "kunjungan";

  public $kunjungan_id;
  public $kunjungan_tgl;
  public $user_id;
  public $pelanggan_id;
  public $produk_id;
  public $hasil;

  public function getAll()
  {
    $this->db->select('a.*,usr.nama petugas_nama,plg.nama pelanggan_nama,prd.produk_nama');
    $this->db->from($this->_table . ' a');
    $this->db->join('users usr', 'usr.user_id = a.user_id');
    $this->db->join('pelanggan plg', 'plg.pelanggan_id = a.pelanggan_id');
    $this->db->join('produk prd', 'prd.produk_id = a.produk_id');
    return $this->db->get()->result();
  }

  public function getById($id)
  {
    $this->db->select('a.*,usr.nama petugas_nama,plg.nama pelanggan_nama,prd.produk_nama');
    $this->db->from($this->_table . ' a');
    $this->db->join('users usr', 'usr.user_id = a.user_id');
    $this->db->join('pelanggan plg', 'plg.pelanggan_id = a.pelanggan_id');
    $this->db->join('produk prd', 'prd.produk_id = a.produk_id');
    $this->db->where('a.kunjungan_id', $id);
    return $this->db->get()->row();
  }

  public function save()
  {
    $post = $this->input->post();
    $this->kunjungan_tgl = $post["kunjungan_tgl"];
    $this->user_id = $post["user_id"];
    $this->pelanggan_id = $post["pelanggan_id"];
    $this->produk_id = $post["produk_id"];
    $this->hasil = $post["hasil"];
    return $this->db->insert($this->_table, $this);
  }

  public function update()
  {
    $post = $this->input->post();
    $this->kunjungan_id = $post["id"];
    $this->kunjungan_tgl = $post["kunjungan_tgl"];
    $this->user_id = $post["user_id"];
    $this->pelanggan_id = $post["pelanggan_id"];
    $this->produk_id = $post["produk_id"];
    $this->hasil = $post["hasil"];
    return $this->db->update($this->_table, $this, array('kunjungan_id' => $post['id']));
  }

  public function delete($id)
  {
    return $this->db->delete($this->_table, array("kunjungan_id" => $id));
  }

  $insert_id=$this->db->insert_id();
        </code></pre>
    </main>
    <div w3-include-html="../../../assets/footer.html"></div>

    <script>
        includeHTML();
    </script>